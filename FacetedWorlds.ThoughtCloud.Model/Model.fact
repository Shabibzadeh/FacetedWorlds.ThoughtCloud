namespace FacetedWorlds.ThoughtCloud.Model;

fact Identity {
key:
    string anonymousId;

query:
    DisableToastNotification* isToastNotificationDisabled {
        DisableToastNotification d : d.identity = this
            where not d.isReenabled
    }
}

fact Thought {
key:
	unique;
    Identity creator;

mutable:
	string text;

query:
	Thought* neighbors {
		Link l : l.thoughts = this
		Thought t : l.thoughts = t
	}
}

fact Link {
key:
	Thought* thoughts;
}

fact DisableToastNotification {
key:
    unique;
    Identity identity;

query:
    bool isReenabled {
        exists EnableToastNotification e : e.disable = this
    }
}

fact EnableToastNotification {
key:
    DisableToastNotification* disable;
}
